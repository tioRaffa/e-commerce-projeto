from django import forms


class ProdutoModelForm(forms.ModelForm):
    class Meta:        /-------         Produto importado do MODELS.PY
        model = Produto
        fields = ['name', 'price', 'stock', 'image']


def prodruct(request):
    if str(request.method) == 'POST':
        form = ProdutoModelForm(request.POST, request.FILES)

        if form.is_valid():
            form.save()                                                     ->  SALVA NO BANCO DE DADOS  /commit=False, nao salva

            messages.success(request, 'Produto Salvo Com Sucesso!')
            form = ProdutoModelForm()  # limpa o formulario

        else:
            messages.error(
                request, 'ERRO!!! Nao Foi Possivel Salvar o Produto.')

    else:
        form = ProdutoModelForm()

    context = {
        'form_vws': form,
    }

    return render(request, 'pages/product.html', context=context)